---

title: "设计模式六大设计原则（六）：开闭原则"
slug: "设计模式六大设计原则（六）：开闭原则"
description:
date: "2019-04-07"
lastmod: "2019-04-07"
image:
math:
license:
hidden: false
draft: false
categories: ["学习笔记"]
tags: ["设计模式"]

---
# 一、定义
Software entities like classes,modules and functions should be open for extension but closed for modifications.（一个软件实体如类、模块和函数应该对扩展开放，对修改关闭。）

开闭原则相比前面介绍的5项原则更模糊，其只界定了我们要达到什么目标，而没有告诉我们怎么去做。

开闭原则对扩展开放，对修改关闭，并不意味着不做任何修改，低层模块的变更，必然要有高层模块进行耦合，否则就是一个孤立无意义的代码片段。
# 二、为什么要实现开闭原则
- 对测试的影响。若软件实现开闭原则，那么针对一个需求的扩展我们只能修改以前的代码，这对以前写好的单元测试会造成影响。
- 提高复用性。所有的逻辑都是从原子逻辑组合而来的，实现开闭原则的手段之一是通过缩小逻辑粒度，抽象相同的逻辑，提高了代码复用。
- 提高可维护性。开闭原则通过扩展的方式实现产品迭代，比修改原有代码更容易。
- 面向对象开发的开发需求。是对象就会有变化，而开闭原则通过抽象，限制了变化边界，是面向对象开发的开发需求。
# 三、如何使用开闭原则
## （一） 制定抽象约束
通过接口或抽象类约束一组可能变化的行为。
1. 通过接口或抽象类约束扩展，对扩展进行边界限定。
2. 参数类型、引用对象尽量使用接口或者抽象类，而不是实现类；
3. 抽象层尽量保持稳定，一旦确定尽量不要修改。
## （二） 元数据（metadata）控制模块行为
所谓元数据指的是配置信息，可以从文件中或数据库中读取，如springBoot的application.yml或application.propertis等等。
## （三） 封装变化
1. 将相同的变化封装到一个接口或抽象类中。
2. 将不同的变化封装到不同的接口或抽象类中。


本文原载于[runningccode.github.io](https://runningccode.github.io)，遵循CC BY-NC-SA 4.0协议，复制请保留原文出处。